{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\82104\\\\Desktop\\\\\\uB2E4\\uC2DC flower\\\\flower\\\\client\\\\src\\\\components\\\\views\\\\CartPage\\\\CartPage.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { getCartItems, removeCartItem, onSuccessBuy } from '../../../_actions/user_actions';\nimport UserCardBlock from './Sections/UserCardBlock';\nimport { Empty, Result } from 'antd';\nimport Paypal from '../../utils/Paypal';\n\nfunction CartPage(props) {\n  const dispatch = useDispatch();\n  const [Total, setTotal] = useState(0);\n  const [ShowTotal, setShowTotal] = useState(false);\n  const [ShowSuccess, setShowSuccess] = useState(false);\n  useEffect(() => {\n    let cartItems = [];\n\n    if (props.user.userData && props.user.userData.cart) {\n      if (props.user.userData.cart.length > 0) {\n        props.user.userData.cart.forEach(item => {\n          cartItems.push(item.id);\n        });\n        dispatch(getCartItems(cartItems, props.user.userData.cart)).then(res => {\n          calulateTotal(res.payload);\n        });\n      }\n    }\n  }, [props.user.userData]);\n\n  let calulateTotal = cartDetail => {\n    let total = 0;\n    cartDetail.map(item => {\n      total += parseInt(item.price, 10) * parseInt(item.quantity);\n    });\n    setTotal(total);\n    setShowTotal(true);\n  };\n\n  let removeFromCart = productId => {\n    dispatch(removeCartItem(productId)).then(res => {\n      if (res.payload.productInfo.length <= 0) {\n        setShowTotal(false);\n      }\n    });\n  };\n\n  const transactionSuccess = data => {\n    dispatch(onSuccessBuy({\n      paymentData: data,\n      cartDetail: props.user.cartDetail\n    })).then(response => {\n      if (response.payload.success) {\n        setShowTotal(false);\n        setShowSuccess(true);\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"85%\",\n      margin: \"3rem auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, \"My Cart\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(UserCardBlock, {\n    removeItem: removeFromCart,\n    products: props.user.cartDetail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  })), ShowTotal ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"3rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, \"Total Amount: $\", Total)) : ShowSuccess ? /*#__PURE__*/React.createElement(Result, {\n    status: \"success\",\n    title: \"Successfully Purchased Items\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Empty, {\n    description: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  })), ShowTotal && /*#__PURE__*/React.createElement(Paypal, {\n    total: Total,\n    onSuccess: transactionSuccess,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default CartPage;","map":{"version":3,"sources":["C:/Users/82104/Desktop/다시 flower/flower/client/src/components/views/CartPage/CartPage.js"],"names":["React","useEffect","useState","useDispatch","getCartItems","removeCartItem","onSuccessBuy","UserCardBlock","Empty","Result","Paypal","CartPage","props","dispatch","Total","setTotal","ShowTotal","setShowTotal","ShowSuccess","setShowSuccess","cartItems","user","userData","cart","length","forEach","item","push","id","then","res","calulateTotal","payload","cartDetail","total","map","parseInt","price","quantity","removeFromCart","productId","productInfo","transactionSuccess","data","paymentData","response","success","width","margin","marginTop"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAAQC,WAAR,QAA2B,aAA3B;AACA,SAASC,YAAT,EAAuBC,cAAvB,EAAuCC,YAAvC,QAA2D,gCAA3D;AACA,OAAOC,aAAP,MAA0B,0BAA1B;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA6B,MAA7B;AACA,OAAOC,MAAP,MAAmB,oBAAnB;;AAEA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AACrB,QAAMC,QAAQ,GAAGV,WAAW,EAA5B;AAEA,QAAM,CAACW,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,CAAC,CAAD,CAAlC;AACA,QAAM,CAACc,SAAD,EAAYC,YAAZ,IAA4Bf,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACgB,WAAD,EAAcC,cAAd,IAAgCjB,QAAQ,CAAC,KAAD,CAA9C;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAImB,SAAS,GAAG,EAAhB;;AAEA,QAAIR,KAAK,CAACS,IAAN,CAAWC,QAAX,IAAuBV,KAAK,CAACS,IAAN,CAAWC,QAAX,CAAoBC,IAA/C,EAAqD;AACnD,UAAIX,KAAK,CAACS,IAAN,CAAWC,QAAX,CAAoBC,IAApB,CAAyBC,MAAzB,GAAkC,CAAtC,EAAyC;AACvCZ,QAAAA,KAAK,CAACS,IAAN,CAAWC,QAAX,CAAoBC,IAApB,CAAyBE,OAAzB,CAAkCC,IAAD,IAAU;AACzCN,UAAAA,SAAS,CAACO,IAAV,CAAeD,IAAI,CAACE,EAApB;AACD,SAFD;AAIAf,QAAAA,QAAQ,CAACT,YAAY,CAACgB,SAAD,EAAYR,KAAK,CAACS,IAAN,CAAWC,QAAX,CAAoBC,IAAhC,CAAb,CAAR,CAA4DM,IAA5D,CACGC,GAAD,IAAS;AACPC,UAAAA,aAAa,CAACD,GAAG,CAACE,OAAL,CAAb;AACD,SAHH;AAKD;AACF;AACF,GAhBM,EAgBJ,CAACpB,KAAK,CAACS,IAAN,CAAWC,QAAZ,CAhBI,CAAT;;AAkBE,MAAIS,aAAa,GAAIE,UAAD,IAAgB;AAClC,QAAIC,KAAK,GAAG,CAAZ;AAEAD,IAAAA,UAAU,CAACE,GAAX,CAAgBT,IAAD,IAAU;AACvBQ,MAAAA,KAAK,IAAIE,QAAQ,CAACV,IAAI,CAACW,KAAN,EAAa,EAAb,CAAR,GAA2BD,QAAQ,CAACV,IAAI,CAACY,QAAN,CAA5C;AACD,KAFD;AAGAvB,IAAAA,QAAQ,CAACmB,KAAD,CAAR;AACAjB,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACD,GARD;;AAUA,MAAIsB,cAAc,GAAIC,SAAD,IAAe;AAClC3B,IAAAA,QAAQ,CAACR,cAAc,CAACmC,SAAD,CAAf,CAAR,CAAoCX,IAApC,CAA0CC,GAAD,IAAS;AAChD,UAAIA,GAAG,CAACE,OAAJ,CAAYS,WAAZ,CAAwBjB,MAAxB,IAAkC,CAAtC,EAAyC;AACvCP,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACD;AACF,KAJD;AAKD,GAND;;AAQA,QAAMyB,kBAAkB,GAAIC,IAAD,IAAU;AAEnC9B,IAAAA,QAAQ,CAACP,YAAY,CAAC;AAClBsC,MAAAA,WAAW,EAAED,IADK;AAElBV,MAAAA,UAAU,EAAErB,KAAK,CAACS,IAAN,CAAWY;AAFL,KAAD,CAAb,CAAR,CAICJ,IAJD,CAIMgB,QAAQ,IAAI;AACd,UAAGA,QAAQ,CAACb,OAAT,CAAiBc,OAApB,EAA6B;AACzB7B,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACAE,QAAAA,cAAc,CAAC,IAAD,CAAd;AACH;AACJ,KATD;AAWD,GAbD;;AAgBF,sBACI;AAAK,IAAA,KAAK,EAAE;AAAE4B,MAAAA,KAAK,EAAE,KAAT;AAAgBC,MAAAA,MAAM,EAAE;AAAxB,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,aAAD;AACE,IAAA,UAAU,EAAET,cADd;AAEE,IAAA,QAAQ,EAAE3B,KAAK,CAACS,IAAN,CAAWY,UAFvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,EAUGjB,SAAS,gBACR;AAAK,IAAA,KAAK,EAAE;AAAEiC,MAAAA,SAAS,EAAE;AAAb,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAoBnC,KAApB,CADF,CADQ,GAINI,WAAW,gBACT,oBAAC,MAAD;AACA,IAAA,MAAM,EAAC,SADP;AAEA,IAAA,KAAK,EAAC,8BAFN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADS,gBAMb,uDACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,KAAD;AAAO,IAAA,WAAW,EAAE,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CApBJ,EA0BKF,SAAS,iBAEV,oBAAC,MAAD;AACI,IAAA,KAAK,EAAEF,KADX;AAEI,IAAA,SAAS,EAAE4B,kBAFf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA5BJ,CADJ;AAuCC;;AAEL,eAAe/B,QAAf","sourcesContent":["import React, {useEffect, useState} from 'react'\r\nimport {useDispatch}  from 'react-redux';\r\nimport { getCartItems, removeCartItem, onSuccessBuy } from '../../../_actions/user_actions'\r\nimport UserCardBlock from './Sections/UserCardBlock'\r\nimport { Empty, Result} from 'antd';\r\nimport Paypal from '../../utils/Paypal'\r\n\r\nfunction CartPage(props) {\r\n    const dispatch = useDispatch();\r\n\r\n    const [Total, setTotal] = useState(0)\r\n    const [ShowTotal, setShowTotal] = useState(false)\r\n    const [ShowSuccess, setShowSuccess] = useState(false)\r\n\r\n    useEffect(() => {\r\n        let cartItems = [];\r\n    \r\n        if (props.user.userData && props.user.userData.cart) {\r\n          if (props.user.userData.cart.length > 0) {\r\n            props.user.userData.cart.forEach((item) => {\r\n              cartItems.push(item.id);\r\n            });\r\n    \r\n            dispatch(getCartItems(cartItems, props.user.userData.cart)).then(\r\n              (res) => {\r\n                calulateTotal(res.payload);\r\n              }\r\n            );\r\n          }\r\n        }\r\n      }, [props.user.userData]);\r\n\r\n      let calulateTotal = (cartDetail) => {\r\n        let total = 0;\r\n    \r\n        cartDetail.map((item) => {\r\n          total += parseInt(item.price, 10) * parseInt(item.quantity);\r\n        });\r\n        setTotal(total);\r\n        setShowTotal(true);\r\n      };\r\n\r\n      let removeFromCart = (productId) => {\r\n        dispatch(removeCartItem(productId)).then((res) => {\r\n          if (res.payload.productInfo.length <= 0) {\r\n            setShowTotal(false);\r\n          }\r\n        });\r\n      };\r\n\r\n      const transactionSuccess = (data) => {\r\n\r\n        dispatch(onSuccessBuy({\r\n            paymentData: data,\r\n            cartDetail: props.user.cartDetail\r\n        }))\r\n        .then(response => {\r\n            if(response.payload.success) {\r\n                setShowTotal(false)\r\n                setShowSuccess(true)\r\n            }\r\n        })\r\n\r\n      }\r\n\r\n\r\n    return (\r\n        <div style={{ width: \"85%\", margin: \"3rem auto\" }}>\r\n          <h1>My Cart</h1>\r\n          <div>\r\n            <UserCardBlock\r\n              removeItem={removeFromCart}\r\n              products={props.user.cartDetail}\r\n            />\r\n          </div>\r\n\r\n\r\n          {ShowTotal ? \r\n            <div style={{ marginTop: \"3rem\" }}>\r\n              <h2>Total Amount: ${Total}</h2>\r\n            </div>\r\n            : ShowSuccess ?\r\n                <Result\r\n                status=\"success\"\r\n                title=\"Successfully Purchased Items\"\r\n                />\r\n            :\r\n            <>\r\n              <br />\r\n              <Empty description={false} />\r\n            </>\r\n            }\r\n\r\n            {ShowTotal && \r\n\r\n            <Paypal \r\n                total={Total}\r\n                onSuccess={transactionSuccess}\r\n            />\r\n            }\r\n\r\n            \r\n\r\n        </div>\r\n      );\r\n    }\r\n\r\nexport default CartPage;"]},"metadata":{},"sourceType":"module"}